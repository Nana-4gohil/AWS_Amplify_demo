<!DOCTYPE html>
<html>

<head>
  <title>Amplify HTML Demo</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <h1>Hello from AWS Amplify + Lambda!</h1>
  <p>Enter two numbers:</p>

  <input id="a" type="number" placeholder="Number A">
  <input id="b" type="number" placeholder="Number B">
  <button onclick="callAPI()">Add</button>

  <p id="result"></p>

  <script>
    const API_URL = "https://dzus6zlqwd.execute-api.ap-south-1.amazonaws.com/prod/add"
    async function callAPI() {
      const a = document.getElementById("a").value;
      const b = document.getElementById("b").value;
      try {
        const res = await fetch(`${API_URL}`, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ a: a, b: b })
        });
        const data = await res.json(); // data = { body: '{"sum":12}' }
        const result = JSON.parse(data.body); // result = { sum: 12 }
        document.getElementById("result").innerText = "Sum = " + result.sum;
      } catch (err) {
        document.getElementById("result").innerText = "Error: " + err;
      }
    }
  </script>
</body>

</html>